@using COMP1640.ViewModels
@model List<TopContributor>
@{
        ViewData["Title"] = "Statistic For " + @DateTime.UtcNow.AddHours(7).ToString("MMMM");
    var logginedUser = (Profile)ViewBag.LogginedUser;
    ViewData["Avatar"] = logginedUser.Avatar;
    ViewData["Name"] = logginedUser.Name;
    var statistic = (Statistic)ViewBag.Statistic;
    Layout = "_QAM";
}
<link rel="stylesheet" href="~/css/res_qa_db.css" />
@if (User.Identity.IsAuthenticated && User.IsInRole("Quality Assurance Manager"))
{
    
    <div class="dashboard">
         <div class="header_db">
            <div class="card_db">
                <div class="numOf_idea">
                    <div class="col-4">
                        <span>@statistic.Idea</span>
                    </div>
                    <div class="col-8">
                        <h5>Total Idea</h5>
                    </div>
                </div>
                <div class="inf_percent">
                    <span class="percent">
                        <i class="fa-solid fa-up-long"></i>11%
                    </span>
                    <span class="text-nowrap text-xs text-muted">Since last week</span>
                </div>
            </div>
            <div class="card_db">
                <div class="numOf_contributors">
                    <div class="col-4">
                        <span>@statistic.Contributor</span>
                    </div>
                    <div class="col-8">
                        <h5>Total Contributor</h5>

                    </div>

                </div>
                <div class="inf_percent">
                    <span class="percent">
                        <i class="fa-solid fa-up-long"></i>11%
                    </span>
                    <span class="text-nowrap text-xs text-muted">Since last week</span>
                </div>
            </div>
            <div class="card_db">
                <div class="react_idea">
                    <div class="col-4">
                        <span>@statistic.View</span>
                    </div>
                    <div class="col-8">
                        <h5>Total View</h5>

                    </div>
                </div>
                <div class="inf_percent">
                    <span class="percent">
                        <i class="fa-solid fa-up-long"></i>11%
                    </span>
                    <span class="text-nowrap text-xs text-muted">Since last week</span>
                </div>
            </div>
            <div class="card_db">
                <div class="numOf_comment">
                    <div class="col-4">
                        <span>@statistic.Comment</span>
                    </div>
                    <div class="col-8">
                        <h5>Total Comment</h5>

                    </div>
                </div>
                <div class="inf_percent">
                    <span class="percent">
                        <i class="fa-solid fa-up-long"></i>11%
                    </span>
                    <span class="text-nowrap text-xs text-muted">Since last week</span>
                </div>
            </div>
        </div>
        
         <div class="body_db">
            <div class="dashboard">
                <div class="colom1">
                    <div class="chartCard">
                        <div class="chartBox">
                            <h5>Number of Ideas per Department/Year </h5>
                            <canvas id="line-chart" width="500" height="300"></canvas>
                        </div>
                    </div>
                    <div class="chart_contributor">
                        <div class="chart_contributors">
                            <h5>Percent of Contributors per Departments </h5>
                            <canvas id="pie-chart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="colom1">
                    <div class="chartCard">
                        <div class="chartBox">
                            <h5>Number of Ideas per Category</h5>
                            <canvas id="bar-chart" width="500" height="300"></canvas>
                        </div>
                    </div>
                    <div class="chartCard">
                        <div class="chartBox">
                               <h5>Number of Points and Views within 7 Lastest Days </h5>
                            <canvas id="mixed-chart" width="500" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="contributor">
                <h4>Top 5 Contributors in @DateTime.UtcNow.AddHours(7).ToString("MMMM")</h4>
                <table class="table">
                    <thead>
                        <tr>                       
                            <th scope="col">Profile ID</th>
                            <th scope="col">Name</th>
                            <th scope="col">DoB</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Address</th>
                            <th scope="col">DepID</th>
                            <th scope="col">Posted Ideas</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach(var item in @Model)
                        {                     
                            <tr>                         
                                <td>@item.Infor.Id</td>
                                <td>@item.Infor.Name</td>
                                <td>@item.Infor.DoB.ToString("MM/dd/yyyy")</td>
                                <td>@item.Infor.Gender</td>
                                <td>@item.Infor.Address</td>
                                <td>@item.Infor.Department.Dep_name</td>
                                <td>@item.PostedIdea</td>
                            </tr>                         
                        }                       
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="~/js/create-chart.js"></script>
